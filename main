using System;
using System.Collections.Generic;
using System.Linq;

class Program
{
    class Character
    {
        public string Name;
        public int Age;
        public string Gender;
        public string Profession;
        public string Hobby;
        public bool IsAlive = true;
        public bool IsKiller = false;

        public string Description =>
            $"{Name}, {Age} yaÅŸÄ±nda bir {Gender.ToLower()} ve mesleÄŸi {Profession.ToLower()}, hobisi ise {Hobby.ToLower()}.";

        public override string ToString()
        {
            return $"{Name}";
        }
    }

    static Random rnd = new Random();
    static string[] Names = { "Ali", "AyÅŸe", "Mehmet", "Zeynep", "Ahmet", "Elif", "Cem", "Seda", "Burak", "Derya" };
    static string[] Genders = { "KadÄ±n", "Erkek" };
    static string[] Professions = { "Ã–ÄŸrenci", "BahÃ§Ä±van", "ÅofÃ¶r", "ÅarkÄ±cÄ±", "Ev Sahibi", "Gazeteci", "Garson", "Barmen", "AÅŸÃ§Ä±" };
    static string[] Hobbies = { "OkÃ§u", "Atlet", "AteÅŸli Silah UstasÄ±", "SatranÃ§", "Bulmaca Ã‡Ã¶zmek", "YÃ¼zmek" };

    static void Main()
    {
        Console.WriteLine("ğŸ” Katili Bulma Oyunu BaÅŸladÄ±!");

        var characters = GenerateCharacters(5);
        var killer = characters[rnd.Next(characters.Count)];
        killer.IsKiller = true;

        Console.WriteLine("\nÅÃ¼pheliler TanÄ±tÄ±lÄ±yor:\n");

        foreach (var character in characters)
        {
            Console.WriteLine(character.Description);
        }

        int attempts = 3;
        while (attempts > 0)
        {
            Console.WriteLine($"\nTahmin et: Katil kim? ({attempts} hakkÄ±n kaldÄ±)");
            Console.WriteLine("Hayatta olan karakterler:");
            foreach (var c in characters.Where(c => c.IsAlive))
            {
                Console.WriteLine($"- {c.Name}");
            }

            Console.Write("\nTahmin ettiÄŸin ismi yaz: ");
            string guess = Console.ReadLine().Trim();

            var guessedCharacter = characters.FirstOrDefault(c => c.Name.Equals(guess, StringComparison.OrdinalIgnoreCase) && c.IsAlive);

            if (guessedCharacter == null)
            {
                Console.WriteLine("GeÃ§ersiz veya Ã¶lÃ¼ bir karakter ismi girdiniz.");
                continue;
            }

            if (guessedCharacter.IsKiller)
            {
                Console.WriteLine($"\nğŸ‰ Tebrikler! {guessedCharacter.Name} katildi. Oyunu kazandÄ±n!");
                return;
            }
            else
            {
                Console.WriteLine($"\nâŒ HayÄ±r, {guessedCharacter.Name} masumdu.");
                guessedCharacter.IsAlive = false;
                attempts--;

                // EÄŸer 1 kiÅŸi kalÄ±rsa (katil), oyun biter
                int aliveCount = characters.Count(c => c.IsAlive);
                if (aliveCount == 1)
                {
                    var lastAlive = characters.First(c => c.IsAlive);
                    Console.WriteLine($"\nâ˜ ï¸ ArtÄ±k sadece katil olan {lastAlive.Name} hayatta kaldÄ±...");
                    Console.WriteLine("ğŸ’€ Katil kazandÄ±. Oyunu kaybettin!");
                    return;
                }
            }
        }

        Console.WriteLine($"\nğŸ˜¢ 3 tahmin hakkÄ±nÄ± da kullandÄ±n. Katil {killer.Name} idi!");
        Console.WriteLine("ğŸ’€ Katil kazandÄ±.");
    }

    static List<Character> GenerateCharacters(int count)
    {
        List<Character> characters = new List<Character>();
        List<string> usedNames = new List<string>();

        for (int i = 0; i < count; i++)
        {
            string name;
            do
            {
                name = Names[rnd.Next(Names.Length)];
            } while (usedNames.Contains(name));
            usedNames.Add(name);

            Character c = new Character
            {
                Name = name,
                Age = rnd.Next(20, 51),
                Gender = Genders[rnd.Next(Genders.Length)],
                Profession = Professions[rnd.Next(Professions.Length)],
                Hobby = Hobbies[rnd.Next(Hobbies.Length)]
            };
            characters.Add(c);
        }

        return characters;
    }
}
