using System;
using System.Collections.Generic;
using System.Linq;

class Program
{
    class Character
    {
        public string Name;
        public int Age;
        public string Gender;
        public string Profession;
        public string Hobby;
        public bool IsAlive = true;
        public bool IsKiller = false;
        public string EmotionalState;
        public string Appearance;

        public string Description =>
            $"{Name}, {Age} yaÅŸÄ±nda bir {Gender.ToLower()} ve mesleÄŸi {Profession.ToLower()}, hobisi ise {Hobby.ToLower()}.\nDuygusal Durumu: {EmotionalState}, DÄ±ÅŸ GÃ¶rÃ¼nÃ¼ÅŸ: {Appearance}.";

        public override string ToString()
        {
            return $"{Name}";
        }
    }

    static Random rnd = new Random();
    static string[] NamesMale = { "Ali", "Mehmet", "Ahmet", "Cem", "Burak" };
    static string[] NamesFemale = { "AyÅŸe", "Zeynep", "Elif", "Seda", "Derya" };
    static string[] Genders = { "KadÄ±n", "Erkek" };
    static string[] Professions = { "Ã–ÄŸrenci", "BahÃ§Ä±van", "ÅofÃ¶r", "ÅarkÄ±cÄ±", "Ev Sahibi", "Gazeteci", "Garson", "Barmen", "AÅŸÃ§Ä±" };
    static string[] Hobbies = { "OkÃ§u", "Atlet", "AteÅŸli Silah UstasÄ±", "SatranÃ§", "Bulmaca Ã‡Ã¶zmek", "YÃ¼zmek" };
    static string[] EmotionalStates = { "Korkuyor", "Sinirli", "Sakin", "Mutlu", "Uykulu" };
    static string[] Appearances = { "Ellerinde kir var", "KÄ±yafeti yÄ±rtÄ±k", "KÄ±yafetleri dÃ¼zgÃ¼n", "Pijama giymiÅŸ" };

    static void Main()
    {
        Console.WriteLine("ğŸ” Katili Bulma Oyunu BaÅŸladÄ±!");

        var characters = GenerateCharacters(7);
        var killer = characters[rnd.Next(characters.Count)];
        killer.IsKiller = true;

        Console.WriteLine("\nÅÃ¼pheliler TanÄ±tÄ±lÄ±yor:\n");

        foreach (var character in characters)
        {
            Console.WriteLine(character.Description);
        }

        int attempts = 3;
        while (attempts > 0)
        {
            Console.WriteLine($"\nTahmin et: Katil kim? ({attempts} hakkÄ±n kaldÄ±)");
            Console.WriteLine("Hayatta olan karakterler:");
            foreach (var c in characters.Where(c => c.IsAlive))
            {
                Console.WriteLine($"- {c.Name}");
            }

            Console.Write("\nTahmin ettiÄŸin ismi yaz: ");
            string guess = Console.ReadLine().Trim();

            var guessedCharacter = characters.FirstOrDefault(c => c.Name.Equals(guess, StringComparison.OrdinalIgnoreCase) && c.IsAlive);

            if (guessedCharacter == null)
            {
                Console.WriteLine("GeÃ§ersiz veya Ã¶lÃ¼ bir karakter ismi girdiniz.");
                continue;
            }

            if (guessedCharacter.IsKiller)
            {
                Console.WriteLine($"\nğŸ‰ Tebrikler! {guessedCharacter.Name} katildi. Oyunu kazandÄ±n!");
                return;
            }
            else
            {
                Console.WriteLine($"\nâŒ HayÄ±r, {guessedCharacter.Name} masumdu.");
                guessedCharacter.IsAlive = false;
                attempts--;

                // EÄŸer 1 kiÅŸi kalÄ±rsa (katil), oyun biter
                int aliveCount = characters.Count(c => c.IsAlive);
                if (aliveCount == 1)
                {
                    var lastAlive = characters.First(c => c.IsAlive);
                    Console.WriteLine($"\nâ˜ ï¸ ArtÄ±k sadece katil olan {lastAlive.Name} hayatta kaldÄ±...");
                    Console.WriteLine("ğŸ’€ Katil kazandÄ±. Oyunu kaybettin!");
                    return;
                }
            }
        }

        Console.WriteLine($"\nğŸ˜¢ 3 tahmin hakkÄ±nÄ± da kullandÄ±n. Katil {killer.Name} idi!");
        Console.WriteLine("ğŸ’€ Katil kazandÄ±.");
    }

    static List<Character> GenerateCharacters(int count)
    {
        List<Character> characters = new List<Character>();
        List<string> usedNames = new List<string>();

        for (int i = 0; i < count; i++)
        {
            string name;
            string gender;
            do
            {
                gender = Genders[rnd.Next(Genders.Length)];
                name = gender == "Erkek" ? NamesMale[rnd.Next(NamesMale.Length)] : NamesFemale[rnd.Next(NamesFemale.Length)];
            } while (usedNames.Contains(name));
            usedNames.Add(name);

            Character c = new Character
            {
                Name = name,
                Age = rnd.Next(20, 51),
                Gender = gender,
                Profession = Professions[rnd.Next(Professions.Length)],
                Hobby = Hobbies[rnd.Next(Hobbies.Length)],
                EmotionalState = EmotionalStates[rnd.Next(EmotionalStates.Length)],
                Appearance = Appearances[rnd.Next(Appearances.Length)]
            };

            // Katil Durumu
            if (c.EmotionalState == "Sinirli" && c.Appearance == "KÄ±yafeti yÄ±rtÄ±k")
            {
                c.IsKiller = true; // Sinirli ve kÄ±yafeti yÄ±rtÄ±k olan %100 katil
            }
            else if ((c.EmotionalState == "Sinirli" && c.Appearance == "Ellerinde kir var") || (c.EmotionalState == "Sakin" && c.Appearance == "KÄ±yafeti yÄ±rtÄ±k"))
            {
                c.IsKiller = rnd.NextDouble() <= 0.5; // Sinirli, elleri kirli veya sakin, kÄ±yafeti yÄ±rtÄ±k olan %50 katil olma ÅŸansÄ±
            }
            else if (c.Hobby == "OkÃ§u" || c.Hobby == "AteÅŸli Silah UstasÄ±")
            {
                c.IsKiller = rnd.NextDouble() <= 0.7; // Bu hobileri olanlarÄ±n katil olma olasÄ±lÄ±ÄŸÄ± %70
            }

            characters.Add(c);
        }

        return characters;
    }
}
